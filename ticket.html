<!DOCTYPE html>

<html lang="ru">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Городской Транспорт</title>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>

        * {

            margin: 0;

            padding: 0;

            box-sizing: border-box;

            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

            -webkit-tap-highlight-color: transparent;

            -webkit-touch-callout: none;

            -webkit-user-select: none;

            user-select: none;

        }



        body {

            background: #fff;

            min-height: 100vh;

            padding: 0;

            margin: 0;

            display: flex;

            flex-direction: column;

        }



        .header {

            display: flex;

            justify-content: space-between;

            align-items: center;

            padding: 14px 16px;

            background: #F7F7F7;

            border-bottom: 1px solid rgba(0, 0, 0, 0.1);

        }



        .header-title {

            text-align: center;

            flex: 1;

        }



        .header-title h1 {

            font-size: 17px;

            font-weight: 500;

            margin: 0;

        }



        .header-title p {

            font-size: 13px;

            color: #8E8E93;

            margin-top: 2px;

        }



        .back-button {

            font-size: 17px;

            color: #000;

            text-decoration: none;

            padding: 8px;

            margin: -8px;

        }



        .menu-button {

            width: 24px;

            height: 24px;

            display: flex;

            align-items: center;

            justify-content: center;

            color: #000;

        }



        .timer {

            text-align: center;

            font-size: 32px;

            margin: 20px 0;

            color: #000;

        }



        .ticket-number {

            display: flex;

            align-items: center;

            gap: 8px;

            padding: 16px;

            border-bottom: 1px solid #E0E0E0;

        }



        .ticket-number svg {

            width: 24px;

            height: 24px;

            color: #E31E24;

        }



        .ticket-number span {

            font-size: 20px;

            color: #000;

        }



        .control-section {

            display: flex;

            align-items: center;

            gap: 8px;

            padding: 16px;

            color: #8E8E93;

        }



        .control-section svg {

            width: 24px;

            height: 24px;

        }



        .info-row {

            display: flex;

            align-items: flex-start;

            gap: 12px;

            padding: 16px;

            border-bottom: 1px solid #E0E0E0;

        }



        .info-row:last-child {

            border-bottom: none;

        }



        .info-row svg {

            width: 24px;

            height: 24px;

            color: #8E8E93;

            flex-shrink: 0;

        }



        .info-content {

            flex: 1;

        }



        .info-label {

            font-size: 15px;

            color: #8E8E93;

            margin-bottom: 4px;

        }



        .info-value {

            font-size: 17px;

            color: #000;

        }



        .vehicle-number {

            font-size: 24px;

            font-weight: 500;

            margin-top: 4px;

        }



        .close-button {

            position: fixed;

            bottom: 16px;

            left: 16px;

            right: 16px;

            background: #E31E24;

            color: white;

            border: none;

            padding: 16px;

            border-radius: 14px;

            font-size: 17px;

            font-weight: 500;

            cursor: pointer;

            margin-bottom: env(safe-area-inset-bottom);

        }

    </style>

</head>

<body>

    <div class="header">

        <a href="index.html" class="back-button">Закрыть</a>

        <div class="header-title">

            <h1>Городской Транспорт</h1>

            <p>МИНИ-ПРИЛОЖЕНИЕ</p>

        </div>

        <div class="menu-button">⋯</div>

    </div>



    <div class="timer" id="timer">Действует: 15 сек.</div>



    <div class="ticket-number">

        <svg viewBox="0 0 24 24">

            <path fill="currentColor" d="M4 4h16v12H4V4zm8 12v4m-4 0h8M4 8h16M4 12h16"/>

        </svg>

        <span id="ticket-number"></span>

    </div>



    <div class="control-section">

        <svg viewBox="0 0 24 24">

            <path fill="currentColor" d="M12 4a4 4 0 014 4 4 4 0 01-4 4 4 4 0 01-4-4 4 4 0 014-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4z"/>

        </svg>

        <span>Контроль</span>

    </div>



    <div class="info-row">

        <svg viewBox="0 0 24 24">

            <path fill="currentColor" d="M12 4a4 4 0 014 4 4 4 0 01-4 4 4 4 0 01-4-4 4 4 0 014-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4z"/>

        </svg>

        <div class="info-content">

            <div class="info-label">Перевозчик</div>

            <div class="info-value" id="carrier"></div>

        </div>

    </div>



    <div class="info-row">

        <svg viewBox="0 0 24 24">

            <path fill="currentColor" d="M18 11H6V6h12m-1.5 11a1.5 1.5 0 01-1.5-1.5 1.5 1.5 0 011.5-1.5 1.5 1.5 0 011.5 1.5 1.5 1.5 0 01-1.5 1.5m-9 0A1.5 1.5 0 016 15.5 1.5 1.5 0 017.5 14 1.5 1.5 0 019 15.5 1.5 1.5 0 017.5 17M4 16c0 .88.39 1.67 1 2.22V20a1 1 0 001 1h1a1 1 0 001-1v-1h8v1a1 1 0 001 1h1a1 1 0 001-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4s-8 .5-8 4v10z"/>

        </svg>

        <div class="info-content">

            <div class="info-label" id="route"></div>

            <div class="info-value vehicle-number" id="vehicle"></div>

        </div>

    </div>



    <div class="info-row">

        <svg viewBox="0 0 24 24">

            <path fill="currentColor" d="M7 15h2c.55 0 1 .45 1 1s-.45 1-1 1H7c-.55 0-1-.45-1-1s.45-1 1-1m0-4h10c.55 0 1 .45 1 1s-.45 1-1 1H7c-.55 0-1-.45-1-1s.45-1 1-1m0-4h10c.55 0 1 .45 1 1s-.45 1-1 1H7c-.55 0-1-.45-1-1s.45-1 1-1M3 3h18c1.1 0 2 .9 2 2v14c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2m0 2v14h18V5H3z"/>

        </svg>

        <div class="info-content">

            <div class="info-label">Стоимость</div>

            <div class="info-value" id="cost"></div>

        </div>

    </div>



    <div class="info-row">

        <svg viewBox="0 0 24 24">

            <path fill="currentColor" d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14v11z"/>

        </svg>

        <div class="info-content">

            <div class="info-label">Дата покупки</div>

            <div class="info-value" id="purchase-date"></div>

        </div>

    </div>



    <div class="info-row">

        <svg viewBox="0 0 24 24">

            <path fill="currentColor" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"/>

        </svg>

        <div class="info-content">

            <div class="info-label">Время покупки</div>

            <div class="info-value" id="purchase-time"></div>

        </div>

    </div>



    <button class="close-button" onclick="window.location.href='index.html'">ЗАКРЫТЬ</button>



    <script>

        let tg = window.Telegram.WebApp;

        tg.expand();



        // Получаем параметры из URL

        const urlParams = new URLSearchParams(window.location.search);

        

        // Заполняем данные билета

        document.getElementById('ticket-number').textContent = urlParams.get('code');

        document.getElementById('carrier').textContent = urlParams.get('carrier');

        document.getElementById('route').textContent = urlParams.get('route');

        document.getElementById('vehicle').textContent = urlParams.get('vehicle').toUpperCase();

        document.getElementById('cost').textContent = `1 шт., Полный, ${urlParams.get('cost')}₽`;

        document.getElementById('purchase-date').textContent = urlParams.get('purchase_date');

        document.getElementById('purchase-time').textContent = urlParams.get('purchase_time');



        // Запускаем таймер

        let timeLeft = 15;

        const timerElement = document.getElementById('timer');

        

        const timer = setInterval(() => {

            timeLeft--;

            timerElement.textContent = `Действует: ${timeLeft} сек.`;

            

            if (timeLeft <= 0) {

                clearInterval(timer);

                window.location.href = 'index.html';

            }

        }, 1000);

    </script>

</body>

</html>

