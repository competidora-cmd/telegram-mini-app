<!DOCTYPE html>

<html lang="ru">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

    <title>Городской Транспорт</title>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>

        * {

            margin: 0;

            padding: 0;

            box-sizing: border-box;

            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

            -webkit-tap-highlight-color: transparent;

        }



        body {

            background: #fff;

            min-height: 100vh;

            padding: 20px;

            margin: 0;

            display: flex;

            flex-direction: column;

        }



        .form-container {

            max-width: 600px;

            margin: 0 auto;

            width: 100%;

        }



        .form-group {

            margin-bottom: 20px;

        }



        label {

            display: block;

            margin-bottom: 8px;

            font-weight: 500;

            color: #000;

        }



        input, select {

            width: 100%;

            padding: 12px;

            border: 1.5px solid #D1D1D6;

            border-radius: 12px;

            font-size: 16px;

            background: #fff;

        }



        input:focus, select:focus {

            outline: none;

            border-color: #E31E24;

        }



        button {

            width: 100%;

            padding: 16px;

            background: #E31E24;

            border: none;

            border-radius: 12px;

            color: white;

            font-size: 16px;

            font-weight: 500;

            cursor: pointer;

            margin-top: 20px;

        }



        .error {

            color: #E31E24;

            font-size: 14px;

            margin-top: 4px;

            display: none;

        }

    </style>

</head>

<body>
    <div class="form-container">
        <div class="form-group">
            <label for="routeNumber">Номер маршрута</label>
            <input type="number" id="routeNumber" min="1" max="99" placeholder="Введите номер (1-99)">
            <div class="error" id="routeNumberError">Номер маршрута должен быть от 1 до 99</div>
        </div>

        <div class="form-group">
            <label for="routePath">Маршрут</label>
            <input type="text" id="routePath" placeholder="например: пос. Водников-Железнодорожный вокзал">
            <div class="error" id="routePathError">Пожалуйста, укажите маршрут</div>
        </div>

        <div class="form-group">
            <label for="carrier">Перевозчик</label>
            <input type="text" id="carrier" placeholder="например: КПАТП-7">
            <div class="error" id="carrierError">Пожалуйста, укажите перевозчика</div>
        </div>

        <div class="form-group">
            <label for="vehicleNumber">Номер транспортного средства</label>
            <input type="text" id="vehicleNumber" placeholder="например: о762та124">
            <div class="error" id="vehicleNumberError">Пожалуйста, укажите номер ТС</div>
        </div>

        <button onclick="generateTicket()">Создать билет</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        function generateRandomTicketNumber() {
            return '9' + Math.random().toString().slice(2, 11);
        }

        function validateForm() {
            const routeNumber = document.getElementById('routeNumber').value;
            const routePath = document.getElementById('routePath').value;
            const carrier = document.getElementById('carrier').value;
            const vehicleNumber = document.getElementById('vehicleNumber').value;

            let isValid = true;

            // Reset errors
            document.querySelectorAll('.error').forEach(error => error.style.display = 'none');

            if (!routeNumber || routeNumber < 1 || routeNumber > 99) {
                document.getElementById('routeNumberError').style.display = 'block';
                isValid = false;
            }

            if (!routePath.trim()) {
                document.getElementById('routePathError').style.display = 'block';
                isValid = false;
            }

            if (!carrier.trim()) {
                document.getElementById('carrierError').style.display = 'block';
                isValid = false;
            }

            if (!vehicleNumber.trim()) {
                document.getElementById('vehicleNumberError').style.display = 'block';
                isValid = false;
            }

            return isValid;
        }

        function generateTicket() {
            if (!validateForm()) {
                return;
            }

            const ticketData = {
                routeNumber: document.getElementById('routeNumber').value,
                routePath: document.getElementById('routePath').value,
                carrier: document.getElementById('carrier').value,
                vehicleNumber: document.getElementById('vehicleNumber').value,
                ticketNumber: generateRandomTicketNumber()
            };

            // Store ticket data in localStorage
            localStorage.setItem('ticketData', JSON.stringify(ticketData));

            // Redirect to ticket.html
            window.location.href = 'ticket.html';
        }
    </script>
</body>

</html>

